# 执行环境及作用域


---

执行环境是JavaScript中最重要的一个概念，每个执行环境都有一个与之关联的变量对象，环境中定义的所有变量和函数都保存在这个对象当中。

每个函数也都有自己的一个执行环境，当执行一个函数时，函数的环境就被推入一个环境栈中，当执行完成后，栈将其环境弹出，把控制权返回给之前的执行环境。

> 当代码在一个环境中执行时，会创建变量对象的一个作用域链。作用域链的作用是保证执行环境有权访问的所有变量和函数的有序访问。
> 
> 什么是作用域链呢？
> 当查找变量的时候，会先从当前上下文的变量对象中查找，如果没有找到，就会从父级(词法层面上的父级)执行上下文的变量对象中查找，一直找到全局上下文的变量对象，也就是全局对象。这样由多个执行上下文的变量对象构成的链表就叫做作用域链。

###没有块级作用域
```
//由于没有块级作用域，所以会出现一下的结果
if(true){
    var red=2
}
alert(red)      //2

for(var i=0;i<10;i++){
    
}
alert(i)        //10

//注：但在es6中，let有了块级作用域
```

```
//如果函数体外的环境想得到函数体内的变量，可以通过return将函数内部的变量放回出来。

function add(){
    var a=23
    retrub a
}
alert(a)        //23
```



